-- To conduct a basic word search:
select id, title, sent_date_year, transcription_plain 
from researchdata_letter l
where transcription_normalized LIKE '%ugly%' 
order by sent_date_year asc 

-- To find two or more words in one letter:
select id, title, sent_date_year, transcription_plain 
from researchdata_letter l
where transcription_normalized LIKE '%soul%' 
and transcription_normalized LIKE '%spirit%'
order by sent_date_year asc;

-- To find letters with word/phrase by rank:
select genrank.name as 'rank of author (persons)', count (*) as 'number of letters'
from researchdata_letter l
left join researchdata_letterperson lp on l.id = lp.letter_id 
left join researchdata_person p on lp.person_id = p.id
left join researchdata_person_rank pr on p.id = pr.person_id
left join researchdata_slgeneric genrank on pr.slpersonrank_id = genrank.id 
where lp.person_letter_relationship_id = 278
and lp.person_id is not null
and l.transcription_normalized LIKE '%duty%' 
group by genrank.id;

--To find number of letters by commentary type:
select count (*)
from researchdata_letter l
left join researchdata_letter_commentary lcom ON l.id = lcom.letter_id
left join researchdata_slgeneric gencom on lcom.sllettercommentary_id = gencom.id
where gencom.name = 'religious';

-- To find number of letters by letter type:
select count (*)
from researchdata_letter l
left join researchdata_letter_letter_type lty ON l.id = lty.letter_id
left join researchdata_slgeneric genty on lty.sllettertype_id = genty.id
where genty.name = 'advising';
