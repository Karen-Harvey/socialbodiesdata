Person by religion:

select genrel.name as 'person religion', count (*)
from researchdata_person p
LEFT JOIN researchdata_person_religion prel ON p.id = prel.person_id
LEFT JOIN researchdata_slgeneric genrel ON prel.slpersonreligion_id = genrel.id
group by genrel.id;

Person by rank:

select genrank.name as 'person rank', count (*)
from researchdata_person p
LEFT JOIN researchdata_person_rank prank ON p.id = prank.person_id
LEFT JOIN researchdata_slgeneric genrank ON prank.slpersonrank_id = genrank.id
group by genrank.id;
  select gengen.name as 'person gender', count (distinct(p.id))
from researchdata_person p
left join researchdata_slgeneric gengen on p.gender_id = gengen.id
left join researchdata_letterperson lp on p.id = lp.person_id 
where lp.person_letter_relationship_id = 278
group by gender_id;

Person by gender:

select
(
	select count(distinct(person_other))
	from researchdata_letterperson lp
	left join researchdata_slgeneric genothergen on lp.person_other_gender_id = genothergen.id
	where person_other_gender_id is not null and genothergen.name = 'male'
	group by person_other_gender_id
) +
(
	select count(distinct(p.id))
	from researchdata_letterperson lp
	left join researchdata_person p on lp.person_id = p.id
	left join researchdata_slgeneric gengen on p.gender_id = gengen.id
	where p.gender_id is not null and gengen.name = 'male'
	group by p.gender_id
)
as 'count_total_males',
(
	select count(distinct(person_other))
	from researchdata_letterperson lp
	left join researchdata_slgeneric genothergen on lp.person_other_gender_id = genothergen.id
	where person_other_gender_id is not null and genothergen.name = 'female'
	group by person_other_gender_id
) +
(
	select count(distinct(p.id))
	from researchdata_letterperson lp
	left join researchdata_person p on lp.person_id = p.id
	left join researchdata_slgeneric gengen on p.gender_id = gengen.id
	where p.gender_id is not null and gengen.name = 'female'
	group by p.gender_id
)
as 'count_total_females',
(
	select count(distinct(person_other))
	from researchdata_letterperson lp
	left join researchdata_slgeneric genothergen on lp.person_other_gender_id = genothergen.id
	where person_other_gender_id is not null and genothergen.name = 'both'
	group by person_other_gender_id
)
as 'count_total_both';


